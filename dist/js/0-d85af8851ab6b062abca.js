(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{K1Ga:function(t,e,n){},"a/7s":function(t,e,n){"use strict";var r=n("gu+S");n.n(r).a},aqZ5:function(t,e,n){"use strict";var r=n("K1Ga");n.n(r).a},"gu+S":function(t,e,n){},so6H:function(t,e,n){"use strict";n.r(e);function r(){var n=this,t=n.$createElement,r=n._self._c||t;return r("div",{staticClass:"page"},[r("Navigation",{attrs:{title:n.title}}),n._v(" "),n.isLoading?r("Loading"):r("ScrollView",{attrs:{useLoadMore:!1},on:{onRefresh:n.onRefresh}},[r("div",{ref:"wrapper",staticClass:"container"},[r("div",{staticClass:"header"},[r("h2",{staticClass:"title"},[n._v("\n                    "+n._s(n.title)+"\n                ")]),n._v(" "),r("p",{staticClass:"sc-title"},[r("span",[n._v(n._s(n.createTime))]),n._v(" "),r("span",[n._v(n._s(n.authorName))]),n._v(" "),r("span",[n._v(n._s(n.visitCount))])])]),n._v(" "),r("div",{staticClass:"content-html",domProps:{innerHTML:n._s(n.content)}}),n._v(" "),n.replyCount?r("div",{staticClass:"main"},[r("div",{staticClass:"comment-header"},[r("p",[n._v(n._s(n.replyCount)+"条回复")])]),n._v(" "),r("ul",{staticClass:"comments"},n._l(n.comments,function(t,e){return r("li",{key:e},[r("Avatar",{attrs:{size:36,url:t.author.avatar_url}}),n._v(" "),r("div",{staticClass:"comment-content"},[r("p",{staticClass:"comment-title"},[n._v("\n                                "+n._s(t.author.loginname)+"\n                                "+n._s(n.getCreateTime(t.create_at))+"\n                            ")]),n._v(" "),r("div",{staticClass:"comment-html",domProps:{innerHTML:n._s(t.content)}})])],1)}),0)]):n._e()])]),n._v(" "),r("ImageSlide",{attrs:{index:n.slideIndex,items:n.items,show:n.openSlide},on:{close:n.onCloseImage}})],1)}r._withStripped=!0;var o,i,a=n("bm2v"),c=n("iQd6"),s=n("o0nx"),u=n("xqZi"),l=n("t06s"),p=n("Nhdc"),f=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),d=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},h=function(i,a,c,s){return new(c||(c=Promise))(function(t,e){function n(t){try{o(s.next(t))}catch(t){e(t)}}function r(t){try{o(s.throw(t))}catch(t){e(t)}}function o(e){e.done?t(e.value):new c(function(t){t(e.value)}).then(n,r)}o((s=s.apply(i,a||[])).next())})},v=function(n,r){var o,i,a,t,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=2&e[0]?i.return:e[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,e[1])).done)return a;switch(i=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return c.label++,{value:e[1],done:!1};case 5:c.label++,i=e[1],e=[0];continue;case 7:e=c.ops.pop(),c.trys.pop();continue;default:if(!(a=0<(a=c.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){c=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){c.label=e[1];break}if(6===e[0]&&c.label<a[1]){c.label=a[1],a=e;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(e);break}a[2]&&c.ops.pop(),c.trys.pop();continue}e=r.call(n,c)}catch(t){e=[6,t],i=0}finally{o=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},y=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},b=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(y(arguments[e]));return t};function m(){var t=null!==i&&i.apply(this,arguments)||this;return t.openSlide=!1,t.items=[],t.slideIndex=0,t}var g=(i=a.a,f(m,i),Object.defineProperty(m.prototype,"topicId",{get:function(){var t=this.$route.params;return(void 0===t?{}:t).id},enumerable:!0,configurable:!0}),m.prototype.created=function(){this.onClickEvent=this.onClickEvent.bind(this)},m.prototype.mounted=function(){return h(this,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.onLoad()];case 1:return t.sent(),this.bindImageClick(),[3,3];case 2:return e=t.sent(),console.log(e),[3,3];case 3:return[2]}})})},Object.defineProperty(m.prototype,"container",{get:function(){return this.$refs.wrapper},enumerable:!0,configurable:!0}),m.prototype.bindImageClick=function(){this.container.addEventListener("click",this.onClickEvent)},m.prototype.unBindImageClick=function(){this.container.removeEventListener("click",this.onClickEvent)},Object.defineProperty(m.prototype,"allImage",{get:function(){return b(this.container.querySelectorAll("img"))},enumerable:!0,configurable:!0}),m.prototype.onClickEvent=function(t){var e=t.target;"IMG"===e.tagName.toLocaleUpperCase()&&this.onClickImages(e)},m.prototype.onClickImages=function(e){var t=this.allImage.map(function(t){return{src:t.src,w:t.naturalWidth,h:t.naturalHeight}}),n=this.allImage.findIndex(function(t){return t===e});this.items=t,this.openSlide=!0,this.slideIndex=n},m.prototype.onLoad=function(){return h(this,void 0,void 0,function(){var e=this;return v(this,function(t){return[2,this.getDetailById(this.topicId).then(function(){return document.title=e.title})]})})},m.prototype.onRefresh=function(n){return h(this,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.onLoad()];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),console.log(e),[3,3];case 3:return n(),[2]}})})},Object.defineProperty(m.prototype,"detail",{get:function(){return this.details[this.topicId]||{}},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"isLoading",{get:function(){return!this.details[this.topicId]},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"content",{get:function(){return this.detail.content},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"title",{get:function(){var t=this.detail.title;return void 0===t?"CNode: Node.js 专业技术社区":t},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"comments",{get:function(){return this.detail.replies},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"createTime",{get:function(){var t=this.detail.create_at;return"发布于 "+Object(l.a)(t)},enumerable:!0,configurable:!0}),m.prototype.getCreateTime=function(t){return Object(l.a)(t)},Object.defineProperty(m.prototype,"authorName",{get:function(){var t=this.detail.author;return"作者 "+(void 0===t?{}:t).loginname},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"visitCount",{get:function(){return this.detail.visit_count+" 次浏览"},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"replyCount",{get:function(){return this.detail.reply_count},enumerable:!0,configurable:!0}),m.prototype.onCloseImage=function(){this.openSlide=!1},m.prototype.beforeDestroy=function(){this.unBindImageClick()},d([Object(s.a)(u.a)],m.prototype,"getDetailById",void 0),d([Object(s.b)(function(t){return t.details.detail})],m.prototype,"details",void 0),m=d([Object(c.a)({components:{Avatar:p.Avatar,ImageSlide:p.ImageSlide,Navigation:p.Navigation}})],m)),_=(n("a/7s"),n("aqZ5"),n("F8we")),C=Object(_.a)(g,r,[],!1,null,"32280780",null);C.options.__file="src/views/details/main.vue";var w=C.exports;e.default=w}}]);